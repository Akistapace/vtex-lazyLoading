function LazyLoadInstance(e){let t;this.lazyElements=document.querySelectorAll(e.targets),this.options={root:null!=e.root?document.querySelector(e.root):null,rootMargin:e.margin||"300px 20px"},this.onRender=e.onRender;const a=()=>"IntersectionObserver"in window,s=()=>{t&&clearTimeout(t),t=setTimeout((()=>{var e=window.pageYOffset;this.lazyElements.forEach((t=>{let a=!1;if(!a&&t.offsetTop<window.innerHeight+e)if(a=!0,"img"==t.tagName.toLowerCase()||"iframe"==t.tagName.toLowerCase())t.classList.contains("--lazy-loaded")||(t.src=t.dataset.lazy,t.classList.remove("--lazy-waiting"),t.classList.add("--lazy-loaded"),this.onRender&&this.onRender(t));else if(!t.classList.contains("--lazy-loaded")){const e=t.textContent||t.innerHTML;t.insertAdjacentHTML("afterbegin",e),t.classList.remove("--lazy-waiting"),t.classList.add("--lazy-loaded"),t.querySelector("noscript")&&t.querySelector("noscript").remove(),this.onRender&&this.onRender(t)}})),0==this.lazyElements.length&&(document.removeEventListener("scroll",s),window.removeEventListener("resize",s),window.removeEventListener("orientationChange",s))}),20)};a()?this.lazyInstance=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const t=e.target;if("img"==t.tagName.toLowerCase()||"iframe"==t.tagName.toLowerCase())t.src=t.dataset.lazy,t.classList.remove("--lazy-waiting"),t.classList.add("--lazy-loaded"),this.onRender&&this.onRender(t),this.lazyInstance.unobserve(t);else{const e=t.textContent||t.innerHTML;t.insertAdjacentHTML("afterbegin",e),t.classList.remove("--lazy-waiting"),t.classList.add("--lazy-loaded"),t.querySelector("noscript")&&t.querySelector("noscript").remove(),this.onRender&&this.onRender(t),this.lazyInstance.unobserve(t)}}}))}),this.options):this.lazyInstance="",this.fallbackRunner=t=>{let a=document;null!=e.root&&(a=document.querySelector(e.root)),t?(s(),a.addEventListener("DOMContentLoaded",s),a.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",s),window.addEventListener("orientationchange",s)):(a.removeEventListener("DOMContentLoaded",s),a.removeEventListener("scroll",s),console.log("DESTROY FALSE"),window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s))},this.fallbackLazyload=()=>{this.lazyElements.forEach((e=>{e.classList.contains("--lazy-triggered")?e.classList.add("--lazy-triggered"):e.classList.add("--lazy-triggered","--lazy-waiting")})),this.fallbackRunner(!0)},this.fallbackDestroyInElement=e=>{let t=document.querySelector(e+":not(.--lazy-loaded)");e&&t.dataset.lazy&&(t.setAttribute("data-stoped-lazy",t.dataset.lazy),t.removeAttribute("data-lazy"),t.classList.remove("--lazy-triggered"),t.classList.remove("--lazy-waiting"),this.lazyElements=Array.from(this.lazyElements).filter((t=>t!=e)))},this.runnerLazyload=()=>{a()?this.lazyElements.forEach((e=>{e.classList.contains("--lazy-triggered")?e.classList.add("--lazy-triggered"):e.classList.add("--lazy-triggered","--lazy-waiting"),this.lazyInstance.observe(e)})):this.fallbackLazyload()},this.destroy=()=>a()?this.lazyInstance.disconnect():this.fallbackRunner(!1),this.destroyInElement=e=>{a()?this.lazyInstance.unobserve(document.querySelector(e)):this.fallbackDestroyInElement(e)},this.update=()=>{this.lazyElements=document.querySelectorAll(`${e.targets}`),a()?this.runnerLazyload():this.fallbackLazyload(!0)},this.reinit=()=>{let t=document.querySelectorAll("[data-stoped-lazy]");t.length>0&&t.forEach((e=>{e.setAttribute("data-lazy",e.dataset.stopedLazy),e.removeAttribute("data-stopedLazy")})),this.lazyElements=document.querySelectorAll(`${e.targets}`),a()?this.runnerLazyload():this.fallbackLazyload(!0)},this.runnerLazyload()}