export default function LazyLoadInstance(e){this.lazyElements=document.querySelectorAll(e.targets),this.options={root:e.root||null,rootMargin:e.margin||"300px 20px",threshold:e.threshold||0};const t=()=>"IntersectionObserver"in window;t()?this.lazyInstance=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const t=e.target;if(console.log("Loaded",t),"img"==t.tagName.toLowerCase()||"iframe"==t.tagName.toLowerCase())t.src=t.dataset.lazy,t.classList.remove("--lazy-waiting"),t.classList.add("--lazy-loaded"),this.lazyInstance.unobserve(t);else{const e=t.textContent||t.innerHTML;t.insertAdjacentHTML("afterbegin",e),t.classList.remove("--lazy-waiting"),t.classList.add("--lazy-loaded"),t.querySelector("noscript")&&t.querySelector("noscript").remove(),this.lazyInstance.unobserve(t)}}}))}),this.options):this.lazyInstance="",this.runnerLazyload=()=>{console.log("runnerLazyload"),t()?this.lazyElements.forEach((e=>{e.classList.add("--lazy-triggered","--lazy-waiting"),this.lazyInstance.observe(e)})):(console.log("IntersectionObserver is not present in this browser"),this.lazyElements.forEach((e=>{if(e.classList.add(["--lazy-triggered","--lazy-waiting"]),"img"==e.tagName.toString()||"iframe"==e.tagName.toString())e.src=e.dataset.lazy;else{const t=e.textContent||e.innerHTML;e.insertAdjacentHTML("afterbegin",t),e.querySelector("noscript").remove()}})))},this.destroy=()=>t()?this.lazyInstance.disconnect():console.log("Is not possible to stopAllLazyLoading"),this.destroyInElement=e=>t()?this.lazyInstance.unobserve(e):console.log("Is not possible to stopLazyElement"),this.update=()=>{this.lazyElements=document.querySelectorAll(`${e.targets}:not(.--lazy-triggered)`),this.runnerLazyload()},this.reinit=()=>{this.lazyElements=document.querySelectorAll(`${e.targets}`),this.runnerLazyload()},this.runnerLazyload()};